114c6b82445226fc89783644f39c2678
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

function setup(env) {
  createDebug.debug = createDebug;
  createDebug.default = createDebug;
  createDebug.coerce = coerce;
  createDebug.disable = disable;
  createDebug.enable = enable;
  createDebug.enabled = enabled;
  createDebug.humanize = require('ms');
  createDebug.destroy = destroy;
  Object.keys(env).forEach(function (key) {
    createDebug[key] = env[key];
  });
  createDebug.names = [];
  createDebug.skips = [];
  createDebug.formatters = {};

  function selectColor(namespace) {
    var hash = 0;

    for (var i = 0; i < namespace.length; i++) {
      hash = (hash << 5) - hash + namespace.charCodeAt(i);
      hash |= 0;
    }

    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];
  }

  createDebug.selectColor = selectColor;

  function createDebug(namespace) {
    var prevTime;
    var enableOverride = null;
    var namespacesCache;
    var enabledCache;

    function debug() {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      if (!debug.enabled) {
        return;
      }

      var self = debug;
      var curr = Number(new Date());
      var ms = curr - (prevTime || curr);
      self.diff = ms;
      self.prev = prevTime;
      self.curr = curr;
      prevTime = curr;
      args[0] = createDebug.coerce(args[0]);

      if (typeof args[0] !== 'string') {
        args.unshift('%O');
      }

      var index = 0;
      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {
        if (match === '%%') {
          return '%';
        }

        index++;
        var formatter = createDebug.formatters[format];

        if (typeof formatter === 'function') {
          var val = args[index];
          match = formatter.call(self, val);
          args.splice(index, 1);
          index--;
        }

        return match;
      });
      createDebug.formatArgs.call(self, args);
      var logFn = self.log || createDebug.log;
      logFn.apply(self, args);
    }

    debug.namespace = namespace;
    debug.useColors = createDebug.useColors();
    debug.color = createDebug.selectColor(namespace);
    debug.extend = extend;
    debug.destroy = createDebug.destroy;
    Object.defineProperty(debug, 'enabled', {
      enumerable: true,
      configurable: false,
      get: function get() {
        if (enableOverride !== null) {
          return enableOverride;
        }

        if (namespacesCache !== createDebug.namespaces) {
          namespacesCache = createDebug.namespaces;
          enabledCache = createDebug.enabled(namespace);
        }

        return enabledCache;
      },
      set: function set(v) {
        enableOverride = v;
      }
    });

    if (typeof createDebug.init === 'function') {
      createDebug.init(debug);
    }

    return debug;
  }

  function extend(namespace, delimiter) {
    var newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);
    newDebug.log = this.log;
    return newDebug;
  }

  function enable(namespaces) {
    createDebug.save(namespaces);
    createDebug.namespaces = namespaces;
    createDebug.names = [];
    createDebug.skips = [];
    var i;
    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\s,]+/);
    var len = split.length;

    for (i = 0; i < len; i++) {
      if (!split[i]) {
        continue;
      }

      namespaces = split[i].replace(/\*/g, '.*?');

      if (namespaces[0] === '-') {
        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));
      } else {
        createDebug.names.push(new RegExp('^' + namespaces + '$'));
      }
    }
  }

  function disable() {
    var namespaces = [].concat((0, _toConsumableArray2.default)(createDebug.names.map(toNamespace)), (0, _toConsumableArray2.default)(createDebug.skips.map(toNamespace).map(function (namespace) {
      return '-' + namespace;
    }))).join(',');
    createDebug.enable('');
    return namespaces;
  }

  function enabled(name) {
    if (name[name.length - 1] === '*') {
      return true;
    }

    var i;
    var len;

    for (i = 0, len = createDebug.skips.length; i < len; i++) {
      if (createDebug.skips[i].test(name)) {
        return false;
      }
    }

    for (i = 0, len = createDebug.names.length; i < len; i++) {
      if (createDebug.names[i].test(name)) {
        return true;
      }
    }

    return false;
  }

  function toNamespace(regexp) {
    return regexp.toString().substring(2, regexp.toString().length - 2).replace(/\.\*\?$/, '*');
  }

  function coerce(val) {
    if (val instanceof Error) {
      return val.stack || val.message;
    }

    return val;
  }

  function destroy() {
    console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
  }

  createDebug.enable(createDebug.load());
  return createDebug;
}

module.exports = setup;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJzZXR1cCIsImVudiIsImNyZWF0ZURlYnVnIiwiZGVidWciLCJkZWZhdWx0IiwiY29lcmNlIiwiZGlzYWJsZSIsImVuYWJsZSIsImVuYWJsZWQiLCJodW1hbml6ZSIsInJlcXVpcmUiLCJkZXN0cm95IiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJuYW1lcyIsInNraXBzIiwiZm9ybWF0dGVycyIsInNlbGVjdENvbG9yIiwibmFtZXNwYWNlIiwiaGFzaCIsImkiLCJsZW5ndGgiLCJjaGFyQ29kZUF0IiwiY29sb3JzIiwiTWF0aCIsImFicyIsInByZXZUaW1lIiwiZW5hYmxlT3ZlcnJpZGUiLCJuYW1lc3BhY2VzQ2FjaGUiLCJlbmFibGVkQ2FjaGUiLCJhcmdzIiwic2VsZiIsImN1cnIiLCJOdW1iZXIiLCJEYXRlIiwibXMiLCJkaWZmIiwicHJldiIsInVuc2hpZnQiLCJpbmRleCIsInJlcGxhY2UiLCJtYXRjaCIsImZvcm1hdCIsImZvcm1hdHRlciIsInZhbCIsImNhbGwiLCJzcGxpY2UiLCJmb3JtYXRBcmdzIiwibG9nRm4iLCJsb2ciLCJhcHBseSIsInVzZUNvbG9ycyIsImNvbG9yIiwiZXh0ZW5kIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiZ2V0IiwibmFtZXNwYWNlcyIsInNldCIsInYiLCJpbml0IiwiZGVsaW1pdGVyIiwibmV3RGVidWciLCJzYXZlIiwic3BsaXQiLCJsZW4iLCJwdXNoIiwiUmVnRXhwIiwic3Vic3RyIiwibWFwIiwidG9OYW1lc3BhY2UiLCJqb2luIiwibmFtZSIsInRlc3QiLCJyZWdleHAiLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsIkVycm9yIiwic3RhY2siLCJtZXNzYWdlIiwiY29uc29sZSIsIndhcm4iLCJsb2FkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7OztBQU1BLFNBQVNBLEtBQVQsQ0FBZUMsR0FBZixFQUFvQjtBQUNuQkMsRUFBQUEsV0FBVyxDQUFDQyxLQUFaLEdBQW9CRCxXQUFwQjtBQUNBQSxFQUFBQSxXQUFXLENBQUNFLE9BQVosR0FBc0JGLFdBQXRCO0FBQ0FBLEVBQUFBLFdBQVcsQ0FBQ0csTUFBWixHQUFxQkEsTUFBckI7QUFDQUgsRUFBQUEsV0FBVyxDQUFDSSxPQUFaLEdBQXNCQSxPQUF0QjtBQUNBSixFQUFBQSxXQUFXLENBQUNLLE1BQVosR0FBcUJBLE1BQXJCO0FBQ0FMLEVBQUFBLFdBQVcsQ0FBQ00sT0FBWixHQUFzQkEsT0FBdEI7QUFDQU4sRUFBQUEsV0FBVyxDQUFDTyxRQUFaLEdBQXVCQyxPQUFPLENBQUMsSUFBRCxDQUE5QjtBQUNBUixFQUFBQSxXQUFXLENBQUNTLE9BQVosR0FBc0JBLE9BQXRCO0FBRUFDLEVBQUFBLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZWixHQUFaLEVBQWlCYSxPQUFqQixDQUF5QixVQUFBQyxHQUFHLEVBQUk7QUFDL0JiLElBQUFBLFdBQVcsQ0FBQ2EsR0FBRCxDQUFYLEdBQW1CZCxHQUFHLENBQUNjLEdBQUQsQ0FBdEI7QUFDQSxHQUZEO0FBUUFiLEVBQUFBLFdBQVcsQ0FBQ2MsS0FBWixHQUFvQixFQUFwQjtBQUNBZCxFQUFBQSxXQUFXLENBQUNlLEtBQVosR0FBb0IsRUFBcEI7QUFPQWYsRUFBQUEsV0FBVyxDQUFDZ0IsVUFBWixHQUF5QixFQUF6Qjs7QUFRQSxXQUFTQyxXQUFULENBQXFCQyxTQUFyQixFQUFnQztBQUMvQixRQUFJQyxJQUFJLEdBQUcsQ0FBWDs7QUFFQSxTQUFLLElBQUlDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdGLFNBQVMsQ0FBQ0csTUFBOUIsRUFBc0NELENBQUMsRUFBdkMsRUFBMkM7QUFDMUNELE1BQUFBLElBQUksR0FBSSxDQUFDQSxJQUFJLElBQUksQ0FBVCxJQUFjQSxJQUFmLEdBQXVCRCxTQUFTLENBQUNJLFVBQVYsQ0FBcUJGLENBQXJCLENBQTlCO0FBQ0FELE1BQUFBLElBQUksSUFBSSxDQUFSO0FBQ0E7O0FBRUQsV0FBT25CLFdBQVcsQ0FBQ3VCLE1BQVosQ0FBbUJDLElBQUksQ0FBQ0MsR0FBTCxDQUFTTixJQUFULElBQWlCbkIsV0FBVyxDQUFDdUIsTUFBWixDQUFtQkYsTUFBdkQsQ0FBUDtBQUNBOztBQUNEckIsRUFBQUEsV0FBVyxDQUFDaUIsV0FBWixHQUEwQkEsV0FBMUI7O0FBU0EsV0FBU2pCLFdBQVQsQ0FBcUJrQixTQUFyQixFQUFnQztBQUMvQixRQUFJUSxRQUFKO0FBQ0EsUUFBSUMsY0FBYyxHQUFHLElBQXJCO0FBQ0EsUUFBSUMsZUFBSjtBQUNBLFFBQUlDLFlBQUo7O0FBRUEsYUFBUzVCLEtBQVQsR0FBd0I7QUFBQSx3Q0FBTjZCLElBQU07QUFBTkEsUUFBQUEsSUFBTTtBQUFBOztBQUV2QixVQUFJLENBQUM3QixLQUFLLENBQUNLLE9BQVgsRUFBb0I7QUFDbkI7QUFDQTs7QUFFRCxVQUFNeUIsSUFBSSxHQUFHOUIsS0FBYjtBQUdBLFVBQU0rQixJQUFJLEdBQUdDLE1BQU0sQ0FBQyxJQUFJQyxJQUFKLEVBQUQsQ0FBbkI7QUFDQSxVQUFNQyxFQUFFLEdBQUdILElBQUksSUFBSU4sUUFBUSxJQUFJTSxJQUFoQixDQUFmO0FBQ0FELE1BQUFBLElBQUksQ0FBQ0ssSUFBTCxHQUFZRCxFQUFaO0FBQ0FKLE1BQUFBLElBQUksQ0FBQ00sSUFBTCxHQUFZWCxRQUFaO0FBQ0FLLE1BQUFBLElBQUksQ0FBQ0MsSUFBTCxHQUFZQSxJQUFaO0FBQ0FOLE1BQUFBLFFBQVEsR0FBR00sSUFBWDtBQUVBRixNQUFBQSxJQUFJLENBQUMsQ0FBRCxDQUFKLEdBQVU5QixXQUFXLENBQUNHLE1BQVosQ0FBbUIyQixJQUFJLENBQUMsQ0FBRCxDQUF2QixDQUFWOztBQUVBLFVBQUksT0FBT0EsSUFBSSxDQUFDLENBQUQsQ0FBWCxLQUFtQixRQUF2QixFQUFpQztBQUVoQ0EsUUFBQUEsSUFBSSxDQUFDUSxPQUFMLENBQWEsSUFBYjtBQUNBOztBQUdELFVBQUlDLEtBQUssR0FBRyxDQUFaO0FBQ0FULE1BQUFBLElBQUksQ0FBQyxDQUFELENBQUosR0FBVUEsSUFBSSxDQUFDLENBQUQsQ0FBSixDQUFRVSxPQUFSLENBQWdCLGVBQWhCLEVBQWlDLFVBQUNDLEtBQUQsRUFBUUMsTUFBUixFQUFtQjtBQUU3RCxZQUFJRCxLQUFLLEtBQUssSUFBZCxFQUFvQjtBQUNuQixpQkFBTyxHQUFQO0FBQ0E7O0FBQ0RGLFFBQUFBLEtBQUs7QUFDTCxZQUFNSSxTQUFTLEdBQUczQyxXQUFXLENBQUNnQixVQUFaLENBQXVCMEIsTUFBdkIsQ0FBbEI7O0FBQ0EsWUFBSSxPQUFPQyxTQUFQLEtBQXFCLFVBQXpCLEVBQXFDO0FBQ3BDLGNBQU1DLEdBQUcsR0FBR2QsSUFBSSxDQUFDUyxLQUFELENBQWhCO0FBQ0FFLFVBQUFBLEtBQUssR0FBR0UsU0FBUyxDQUFDRSxJQUFWLENBQWVkLElBQWYsRUFBcUJhLEdBQXJCLENBQVI7QUFHQWQsVUFBQUEsSUFBSSxDQUFDZ0IsTUFBTCxDQUFZUCxLQUFaLEVBQW1CLENBQW5CO0FBQ0FBLFVBQUFBLEtBQUs7QUFDTDs7QUFDRCxlQUFPRSxLQUFQO0FBQ0EsT0FoQlMsQ0FBVjtBQW1CQXpDLE1BQUFBLFdBQVcsQ0FBQytDLFVBQVosQ0FBdUJGLElBQXZCLENBQTRCZCxJQUE1QixFQUFrQ0QsSUFBbEM7QUFFQSxVQUFNa0IsS0FBSyxHQUFHakIsSUFBSSxDQUFDa0IsR0FBTCxJQUFZakQsV0FBVyxDQUFDaUQsR0FBdEM7QUFDQUQsTUFBQUEsS0FBSyxDQUFDRSxLQUFOLENBQVluQixJQUFaLEVBQWtCRCxJQUFsQjtBQUNBOztBQUVEN0IsSUFBQUEsS0FBSyxDQUFDaUIsU0FBTixHQUFrQkEsU0FBbEI7QUFDQWpCLElBQUFBLEtBQUssQ0FBQ2tELFNBQU4sR0FBa0JuRCxXQUFXLENBQUNtRCxTQUFaLEVBQWxCO0FBQ0FsRCxJQUFBQSxLQUFLLENBQUNtRCxLQUFOLEdBQWNwRCxXQUFXLENBQUNpQixXQUFaLENBQXdCQyxTQUF4QixDQUFkO0FBQ0FqQixJQUFBQSxLQUFLLENBQUNvRCxNQUFOLEdBQWVBLE1BQWY7QUFDQXBELElBQUFBLEtBQUssQ0FBQ1EsT0FBTixHQUFnQlQsV0FBVyxDQUFDUyxPQUE1QjtBQUVBQyxJQUFBQSxNQUFNLENBQUM0QyxjQUFQLENBQXNCckQsS0FBdEIsRUFBNkIsU0FBN0IsRUFBd0M7QUFDdkNzRCxNQUFBQSxVQUFVLEVBQUUsSUFEMkI7QUFFdkNDLE1BQUFBLFlBQVksRUFBRSxLQUZ5QjtBQUd2Q0MsTUFBQUEsR0FBRyxFQUFFLGVBQU07QUFDVixZQUFJOUIsY0FBYyxLQUFLLElBQXZCLEVBQTZCO0FBQzVCLGlCQUFPQSxjQUFQO0FBQ0E7O0FBQ0QsWUFBSUMsZUFBZSxLQUFLNUIsV0FBVyxDQUFDMEQsVUFBcEMsRUFBZ0Q7QUFDL0M5QixVQUFBQSxlQUFlLEdBQUc1QixXQUFXLENBQUMwRCxVQUE5QjtBQUNBN0IsVUFBQUEsWUFBWSxHQUFHN0IsV0FBVyxDQUFDTSxPQUFaLENBQW9CWSxTQUFwQixDQUFmO0FBQ0E7O0FBRUQsZUFBT1csWUFBUDtBQUNBLE9BYnNDO0FBY3ZDOEIsTUFBQUEsR0FBRyxFQUFFLGFBQUFDLENBQUMsRUFBSTtBQUNUakMsUUFBQUEsY0FBYyxHQUFHaUMsQ0FBakI7QUFDQTtBQWhCc0MsS0FBeEM7O0FBb0JBLFFBQUksT0FBTzVELFdBQVcsQ0FBQzZELElBQW5CLEtBQTRCLFVBQWhDLEVBQTRDO0FBQzNDN0QsTUFBQUEsV0FBVyxDQUFDNkQsSUFBWixDQUFpQjVELEtBQWpCO0FBQ0E7O0FBRUQsV0FBT0EsS0FBUDtBQUNBOztBQUVELFdBQVNvRCxNQUFULENBQWdCbkMsU0FBaEIsRUFBMkI0QyxTQUEzQixFQUFzQztBQUNyQyxRQUFNQyxRQUFRLEdBQUcvRCxXQUFXLENBQUMsS0FBS2tCLFNBQUwsSUFBa0IsT0FBTzRDLFNBQVAsS0FBcUIsV0FBckIsR0FBbUMsR0FBbkMsR0FBeUNBLFNBQTNELElBQXdFNUMsU0FBekUsQ0FBNUI7QUFDQTZDLElBQUFBLFFBQVEsQ0FBQ2QsR0FBVCxHQUFlLEtBQUtBLEdBQXBCO0FBQ0EsV0FBT2MsUUFBUDtBQUNBOztBQVNELFdBQVMxRCxNQUFULENBQWdCcUQsVUFBaEIsRUFBNEI7QUFDM0IxRCxJQUFBQSxXQUFXLENBQUNnRSxJQUFaLENBQWlCTixVQUFqQjtBQUNBMUQsSUFBQUEsV0FBVyxDQUFDMEQsVUFBWixHQUF5QkEsVUFBekI7QUFFQTFELElBQUFBLFdBQVcsQ0FBQ2MsS0FBWixHQUFvQixFQUFwQjtBQUNBZCxJQUFBQSxXQUFXLENBQUNlLEtBQVosR0FBb0IsRUFBcEI7QUFFQSxRQUFJSyxDQUFKO0FBQ0EsUUFBTTZDLEtBQUssR0FBRyxDQUFDLE9BQU9QLFVBQVAsS0FBc0IsUUFBdEIsR0FBaUNBLFVBQWpDLEdBQThDLEVBQS9DLEVBQW1ETyxLQUFuRCxDQUF5RCxRQUF6RCxDQUFkO0FBQ0EsUUFBTUMsR0FBRyxHQUFHRCxLQUFLLENBQUM1QyxNQUFsQjs7QUFFQSxTQUFLRCxDQUFDLEdBQUcsQ0FBVCxFQUFZQSxDQUFDLEdBQUc4QyxHQUFoQixFQUFxQjlDLENBQUMsRUFBdEIsRUFBMEI7QUFDekIsVUFBSSxDQUFDNkMsS0FBSyxDQUFDN0MsQ0FBRCxDQUFWLEVBQWU7QUFFZDtBQUNBOztBQUVEc0MsTUFBQUEsVUFBVSxHQUFHTyxLQUFLLENBQUM3QyxDQUFELENBQUwsQ0FBU29CLE9BQVQsQ0FBaUIsS0FBakIsRUFBd0IsS0FBeEIsQ0FBYjs7QUFFQSxVQUFJa0IsVUFBVSxDQUFDLENBQUQsQ0FBVixLQUFrQixHQUF0QixFQUEyQjtBQUMxQjFELFFBQUFBLFdBQVcsQ0FBQ2UsS0FBWixDQUFrQm9ELElBQWxCLENBQXVCLElBQUlDLE1BQUosQ0FBVyxNQUFNVixVQUFVLENBQUNXLE1BQVgsQ0FBa0IsQ0FBbEIsQ0FBTixHQUE2QixHQUF4QyxDQUF2QjtBQUNBLE9BRkQsTUFFTztBQUNOckUsUUFBQUEsV0FBVyxDQUFDYyxLQUFaLENBQWtCcUQsSUFBbEIsQ0FBdUIsSUFBSUMsTUFBSixDQUFXLE1BQU1WLFVBQU4sR0FBbUIsR0FBOUIsQ0FBdkI7QUFDQTtBQUNEO0FBQ0Q7O0FBUUQsV0FBU3RELE9BQVQsR0FBbUI7QUFDbEIsUUFBTXNELFVBQVUsR0FBRywyQ0FDZjFELFdBQVcsQ0FBQ2MsS0FBWixDQUFrQndELEdBQWxCLENBQXNCQyxXQUF0QixDQURlLG9DQUVmdkUsV0FBVyxDQUFDZSxLQUFaLENBQWtCdUQsR0FBbEIsQ0FBc0JDLFdBQXRCLEVBQW1DRCxHQUFuQyxDQUF1QyxVQUFBcEQsU0FBUztBQUFBLGFBQUksTUFBTUEsU0FBVjtBQUFBLEtBQWhELENBRmUsR0FHakJzRCxJQUhpQixDQUdaLEdBSFksQ0FBbkI7QUFJQXhFLElBQUFBLFdBQVcsQ0FBQ0ssTUFBWixDQUFtQixFQUFuQjtBQUNBLFdBQU9xRCxVQUFQO0FBQ0E7O0FBU0QsV0FBU3BELE9BQVQsQ0FBaUJtRSxJQUFqQixFQUF1QjtBQUN0QixRQUFJQSxJQUFJLENBQUNBLElBQUksQ0FBQ3BELE1BQUwsR0FBYyxDQUFmLENBQUosS0FBMEIsR0FBOUIsRUFBbUM7QUFDbEMsYUFBTyxJQUFQO0FBQ0E7O0FBRUQsUUFBSUQsQ0FBSjtBQUNBLFFBQUk4QyxHQUFKOztBQUVBLFNBQUs5QyxDQUFDLEdBQUcsQ0FBSixFQUFPOEMsR0FBRyxHQUFHbEUsV0FBVyxDQUFDZSxLQUFaLENBQWtCTSxNQUFwQyxFQUE0Q0QsQ0FBQyxHQUFHOEMsR0FBaEQsRUFBcUQ5QyxDQUFDLEVBQXRELEVBQTBEO0FBQ3pELFVBQUlwQixXQUFXLENBQUNlLEtBQVosQ0FBa0JLLENBQWxCLEVBQXFCc0QsSUFBckIsQ0FBMEJELElBQTFCLENBQUosRUFBcUM7QUFDcEMsZUFBTyxLQUFQO0FBQ0E7QUFDRDs7QUFFRCxTQUFLckQsQ0FBQyxHQUFHLENBQUosRUFBTzhDLEdBQUcsR0FBR2xFLFdBQVcsQ0FBQ2MsS0FBWixDQUFrQk8sTUFBcEMsRUFBNENELENBQUMsR0FBRzhDLEdBQWhELEVBQXFEOUMsQ0FBQyxFQUF0RCxFQUEwRDtBQUN6RCxVQUFJcEIsV0FBVyxDQUFDYyxLQUFaLENBQWtCTSxDQUFsQixFQUFxQnNELElBQXJCLENBQTBCRCxJQUExQixDQUFKLEVBQXFDO0FBQ3BDLGVBQU8sSUFBUDtBQUNBO0FBQ0Q7O0FBRUQsV0FBTyxLQUFQO0FBQ0E7O0FBU0QsV0FBU0YsV0FBVCxDQUFxQkksTUFBckIsRUFBNkI7QUFDNUIsV0FBT0EsTUFBTSxDQUFDQyxRQUFQLEdBQ0xDLFNBREssQ0FDSyxDQURMLEVBQ1FGLE1BQU0sQ0FBQ0MsUUFBUCxHQUFrQnZELE1BQWxCLEdBQTJCLENBRG5DLEVBRUxtQixPQUZLLENBRUcsU0FGSCxFQUVjLEdBRmQsQ0FBUDtBQUdBOztBQVNELFdBQVNyQyxNQUFULENBQWdCeUMsR0FBaEIsRUFBcUI7QUFDcEIsUUFBSUEsR0FBRyxZQUFZa0MsS0FBbkIsRUFBMEI7QUFDekIsYUFBT2xDLEdBQUcsQ0FBQ21DLEtBQUosSUFBYW5DLEdBQUcsQ0FBQ29DLE9BQXhCO0FBQ0E7O0FBQ0QsV0FBT3BDLEdBQVA7QUFDQTs7QUFNRCxXQUFTbkMsT0FBVCxHQUFtQjtBQUNsQndFLElBQUFBLE9BQU8sQ0FBQ0MsSUFBUixDQUFhLHVJQUFiO0FBQ0E7O0FBRURsRixFQUFBQSxXQUFXLENBQUNLLE1BQVosQ0FBbUJMLFdBQVcsQ0FBQ21GLElBQVosRUFBbkI7QUFFQSxTQUFPbkYsV0FBUDtBQUNBOztBQUVEb0YsTUFBTSxDQUFDQyxPQUFQLEdBQWlCdkYsS0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qKlxuICogVGhpcyBpcyB0aGUgY29tbW9uIGxvZ2ljIGZvciBib3RoIHRoZSBOb2RlLmpzIGFuZCB3ZWIgYnJvd3NlclxuICogaW1wbGVtZW50YXRpb25zIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5mdW5jdGlvbiBzZXR1cChlbnYpIHtcblx0Y3JlYXRlRGVidWcuZGVidWcgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuZGVmYXVsdCA9IGNyZWF0ZURlYnVnO1xuXHRjcmVhdGVEZWJ1Zy5jb2VyY2UgPSBjb2VyY2U7XG5cdGNyZWF0ZURlYnVnLmRpc2FibGUgPSBkaXNhYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGUgPSBlbmFibGU7XG5cdGNyZWF0ZURlYnVnLmVuYWJsZWQgPSBlbmFibGVkO1xuXHRjcmVhdGVEZWJ1Zy5odW1hbml6ZSA9IHJlcXVpcmUoJ21zJyk7XG5cdGNyZWF0ZURlYnVnLmRlc3Ryb3kgPSBkZXN0cm95O1xuXG5cdE9iamVjdC5rZXlzKGVudikuZm9yRWFjaChrZXkgPT4ge1xuXHRcdGNyZWF0ZURlYnVnW2tleV0gPSBlbnZba2V5XTtcblx0fSk7XG5cblx0LyoqXG5cdCogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG5cdCovXG5cblx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0Y3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcblxuXHQvKipcblx0KiBNYXAgb2Ygc3BlY2lhbCBcIiVuXCIgaGFuZGxpbmcgZnVuY3Rpb25zLCBmb3IgdGhlIGRlYnVnIFwiZm9ybWF0XCIgYXJndW1lbnQuXG5cdCpcblx0KiBWYWxpZCBrZXkgbmFtZXMgYXJlIGEgc2luZ2xlLCBsb3dlciBvciB1cHBlci1jYXNlIGxldHRlciwgaS5lLiBcIm5cIiBhbmQgXCJOXCIuXG5cdCovXG5cdGNyZWF0ZURlYnVnLmZvcm1hdHRlcnMgPSB7fTtcblxuXHQvKipcblx0KiBTZWxlY3RzIGEgY29sb3IgZm9yIGEgZGVidWcgbmFtZXNwYWNlXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHN0cmluZyBmb3IgdGhlIGRlYnVnIGluc3RhbmNlIHRvIGJlIGNvbG9yZWRcblx0KiBAcmV0dXJuIHtOdW1iZXJ8U3RyaW5nfSBBbiBBTlNJIGNvbG9yIGNvZGUgZm9yIHRoZSBnaXZlbiBuYW1lc3BhY2Vcblx0KiBAYXBpIHByaXZhdGVcblx0Ki9cblx0ZnVuY3Rpb24gc2VsZWN0Q29sb3IobmFtZXNwYWNlKSB7XG5cdFx0bGV0IGhhc2ggPSAwO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lc3BhY2UubGVuZ3RoOyBpKyspIHtcblx0XHRcdGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIG5hbWVzcGFjZS5jaGFyQ29kZUF0KGkpO1xuXHRcdFx0aGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcblx0XHR9XG5cblx0XHRyZXR1cm4gY3JlYXRlRGVidWcuY29sb3JzW01hdGguYWJzKGhhc2gpICUgY3JlYXRlRGVidWcuY29sb3JzLmxlbmd0aF07XG5cdH1cblx0Y3JlYXRlRGVidWcuc2VsZWN0Q29sb3IgPSBzZWxlY3RDb2xvcjtcblxuXHQvKipcblx0KiBDcmVhdGUgYSBkZWJ1Z2dlciB3aXRoIHRoZSBnaXZlbiBgbmFtZXNwYWNlYC5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2Vcblx0KiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBjcmVhdGVEZWJ1ZyhuYW1lc3BhY2UpIHtcblx0XHRsZXQgcHJldlRpbWU7XG5cdFx0bGV0IGVuYWJsZU92ZXJyaWRlID0gbnVsbDtcblx0XHRsZXQgbmFtZXNwYWNlc0NhY2hlO1xuXHRcdGxldCBlbmFibGVkQ2FjaGU7XG5cblx0XHRmdW5jdGlvbiBkZWJ1ZyguLi5hcmdzKSB7XG5cdFx0XHQvLyBEaXNhYmxlZD9cblx0XHRcdGlmICghZGVidWcuZW5hYmxlZCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHNlbGYgPSBkZWJ1ZztcblxuXHRcdFx0Ly8gU2V0IGBkaWZmYCB0aW1lc3RhbXBcblx0XHRcdGNvbnN0IGN1cnIgPSBOdW1iZXIobmV3IERhdGUoKSk7XG5cdFx0XHRjb25zdCBtcyA9IGN1cnIgLSAocHJldlRpbWUgfHwgY3Vycik7XG5cdFx0XHRzZWxmLmRpZmYgPSBtcztcblx0XHRcdHNlbGYucHJldiA9IHByZXZUaW1lO1xuXHRcdFx0c2VsZi5jdXJyID0gY3Vycjtcblx0XHRcdHByZXZUaW1lID0gY3VycjtcblxuXHRcdFx0YXJnc1swXSA9IGNyZWF0ZURlYnVnLmNvZXJjZShhcmdzWzBdKTtcblxuXHRcdFx0aWYgKHR5cGVvZiBhcmdzWzBdICE9PSAnc3RyaW5nJykge1xuXHRcdFx0XHQvLyBBbnl0aGluZyBlbHNlIGxldCdzIGluc3BlY3Qgd2l0aCAlT1xuXHRcdFx0XHRhcmdzLnVuc2hpZnQoJyVPJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFwcGx5IGFueSBgZm9ybWF0dGVyc2AgdHJhbnNmb3JtYXRpb25zXG5cdFx0XHRsZXQgaW5kZXggPSAwO1xuXHRcdFx0YXJnc1swXSA9IGFyZ3NbMF0ucmVwbGFjZSgvJShbYS16QS1aJV0pL2csIChtYXRjaCwgZm9ybWF0KSA9PiB7XG5cdFx0XHRcdC8vIElmIHdlIGVuY291bnRlciBhbiBlc2NhcGVkICUgdGhlbiBkb24ndCBpbmNyZWFzZSB0aGUgYXJyYXkgaW5kZXhcblx0XHRcdFx0aWYgKG1hdGNoID09PSAnJSUnKSB7XG5cdFx0XHRcdFx0cmV0dXJuICclJztcblx0XHRcdFx0fVxuXHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRjb25zdCBmb3JtYXR0ZXIgPSBjcmVhdGVEZWJ1Zy5mb3JtYXR0ZXJzW2Zvcm1hdF07XG5cdFx0XHRcdGlmICh0eXBlb2YgZm9ybWF0dGVyID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0Y29uc3QgdmFsID0gYXJnc1tpbmRleF07XG5cdFx0XHRcdFx0bWF0Y2ggPSBmb3JtYXR0ZXIuY2FsbChzZWxmLCB2YWwpO1xuXG5cdFx0XHRcdFx0Ly8gTm93IHdlIG5lZWQgdG8gcmVtb3ZlIGBhcmdzW2luZGV4XWAgc2luY2UgaXQncyBpbmxpbmVkIGluIHRoZSBgZm9ybWF0YFxuXHRcdFx0XHRcdGFyZ3Muc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0XHRpbmRleC0tO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBtYXRjaDtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBBcHBseSBlbnYtc3BlY2lmaWMgZm9ybWF0dGluZyAoY29sb3JzLCBldGMuKVxuXHRcdFx0Y3JlYXRlRGVidWcuZm9ybWF0QXJncy5jYWxsKHNlbGYsIGFyZ3MpO1xuXG5cdFx0XHRjb25zdCBsb2dGbiA9IHNlbGYubG9nIHx8IGNyZWF0ZURlYnVnLmxvZztcblx0XHRcdGxvZ0ZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXHRcdH1cblxuXHRcdGRlYnVnLm5hbWVzcGFjZSA9IG5hbWVzcGFjZTtcblx0XHRkZWJ1Zy51c2VDb2xvcnMgPSBjcmVhdGVEZWJ1Zy51c2VDb2xvcnMoKTtcblx0XHRkZWJ1Zy5jb2xvciA9IGNyZWF0ZURlYnVnLnNlbGVjdENvbG9yKG5hbWVzcGFjZSk7XG5cdFx0ZGVidWcuZXh0ZW5kID0gZXh0ZW5kO1xuXHRcdGRlYnVnLmRlc3Ryb3kgPSBjcmVhdGVEZWJ1Zy5kZXN0cm95OyAvLyBYWFggVGVtcG9yYXJ5LiBXaWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZWJ1ZywgJ2VuYWJsZWQnLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcblx0XHRcdGdldDogKCkgPT4ge1xuXHRcdFx0XHRpZiAoZW5hYmxlT3ZlcnJpZGUgIT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gZW5hYmxlT3ZlcnJpZGU7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG5hbWVzcGFjZXNDYWNoZSAhPT0gY3JlYXRlRGVidWcubmFtZXNwYWNlcykge1xuXHRcdFx0XHRcdG5hbWVzcGFjZXNDYWNoZSA9IGNyZWF0ZURlYnVnLm5hbWVzcGFjZXM7XG5cdFx0XHRcdFx0ZW5hYmxlZENhY2hlID0gY3JlYXRlRGVidWcuZW5hYmxlZChuYW1lc3BhY2UpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGVuYWJsZWRDYWNoZTtcblx0XHRcdH0sXG5cdFx0XHRzZXQ6IHYgPT4ge1xuXHRcdFx0XHRlbmFibGVPdmVycmlkZSA9IHY7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBFbnYtc3BlY2lmaWMgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGRlYnVnIGluc3RhbmNlc1xuXHRcdGlmICh0eXBlb2YgY3JlYXRlRGVidWcuaW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Y3JlYXRlRGVidWcuaW5pdChkZWJ1Zyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlYnVnO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXh0ZW5kKG5hbWVzcGFjZSwgZGVsaW1pdGVyKSB7XG5cdFx0Y29uc3QgbmV3RGVidWcgPSBjcmVhdGVEZWJ1Zyh0aGlzLm5hbWVzcGFjZSArICh0eXBlb2YgZGVsaW1pdGVyID09PSAndW5kZWZpbmVkJyA/ICc6JyA6IGRlbGltaXRlcikgKyBuYW1lc3BhY2UpO1xuXHRcdG5ld0RlYnVnLmxvZyA9IHRoaXMubG9nO1xuXHRcdHJldHVybiBuZXdEZWJ1Zztcblx0fVxuXG5cdC8qKlxuXHQqIEVuYWJsZXMgYSBkZWJ1ZyBtb2RlIGJ5IG5hbWVzcGFjZXMuIFRoaXMgY2FuIGluY2x1ZGUgbW9kZXNcblx0KiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuXHRcdGNyZWF0ZURlYnVnLnNhdmUobmFtZXNwYWNlcyk7XG5cdFx0Y3JlYXRlRGVidWcubmFtZXNwYWNlcyA9IG5hbWVzcGFjZXM7XG5cblx0XHRjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuXHRcdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0XHRsZXQgaTtcblx0XHRjb25zdCBzcGxpdCA9ICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycgPyBuYW1lc3BhY2VzIDogJycpLnNwbGl0KC9bXFxzLF0rLyk7XG5cdFx0Y29uc3QgbGVuID0gc3BsaXQubGVuZ3RoO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoIXNwbGl0W2ldKSB7XG5cdFx0XHRcdC8vIGlnbm9yZSBlbXB0eSBzdHJpbmdzXG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRuYW1lc3BhY2VzID0gc3BsaXRbaV0ucmVwbGFjZSgvXFwqL2csICcuKj8nKTtcblxuXHRcdFx0aWYgKG5hbWVzcGFjZXNbMF0gPT09ICctJykge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcy5zdWJzdHIoMSkgKyAnJCcpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNyZWF0ZURlYnVnLm5hbWVzLnB1c2gobmV3IFJlZ0V4cCgnXicgKyBuYW1lc3BhY2VzICsgJyQnKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCogRGlzYWJsZSBkZWJ1ZyBvdXRwdXQuXG5cdCpcblx0KiBAcmV0dXJuIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBkaXNhYmxlKCkge1xuXHRcdGNvbnN0IG5hbWVzcGFjZXMgPSBbXG5cdFx0XHQuLi5jcmVhdGVEZWJ1Zy5uYW1lcy5tYXAodG9OYW1lc3BhY2UpLFxuXHRcdFx0Li4uY3JlYXRlRGVidWcuc2tpcHMubWFwKHRvTmFtZXNwYWNlKS5tYXAobmFtZXNwYWNlID0+ICctJyArIG5hbWVzcGFjZSlcblx0XHRdLmpvaW4oJywnKTtcblx0XHRjcmVhdGVEZWJ1Zy5lbmFibGUoJycpO1xuXHRcdHJldHVybiBuYW1lc3BhY2VzO1xuXHR9XG5cblx0LyoqXG5cdCogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBtb2RlIG5hbWUgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0KiBAcmV0dXJuIHtCb29sZWFufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGVuYWJsZWQobmFtZSkge1xuXHRcdGlmIChuYW1lW25hbWUubGVuZ3RoIC0gMV0gPT09ICcqJykge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0bGV0IGk7XG5cdFx0bGV0IGxlbjtcblxuXHRcdGZvciAoaSA9IDAsIGxlbiA9IGNyZWF0ZURlYnVnLnNraXBzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoY3JlYXRlRGVidWcuc2tpcHNbaV0udGVzdChuYW1lKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMCwgbGVuID0gY3JlYXRlRGVidWcubmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdGlmIChjcmVhdGVEZWJ1Zy5uYW1lc1tpXS50ZXN0KG5hbWUpKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQqIENvbnZlcnQgcmVnZXhwIHRvIG5hbWVzcGFjZVxuXHQqXG5cdCogQHBhcmFtIHtSZWdFeHB9IHJlZ3hlcFxuXHQqIEByZXR1cm4ge1N0cmluZ30gbmFtZXNwYWNlXG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIHRvTmFtZXNwYWNlKHJlZ2V4cCkge1xuXHRcdHJldHVybiByZWdleHAudG9TdHJpbmcoKVxuXHRcdFx0LnN1YnN0cmluZygyLCByZWdleHAudG9TdHJpbmcoKS5sZW5ndGggLSAyKVxuXHRcdFx0LnJlcGxhY2UoL1xcLlxcKlxcPyQvLCAnKicpO1xuXHR9XG5cblx0LyoqXG5cdCogQ29lcmNlIGB2YWxgLlxuXHQqXG5cdCogQHBhcmFtIHtNaXhlZH0gdmFsXG5cdCogQHJldHVybiB7TWl4ZWR9XG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIGNvZXJjZSh2YWwpIHtcblx0XHRpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG5cdFx0fVxuXHRcdHJldHVybiB2YWw7XG5cdH1cblxuXHQvKipcblx0KiBYWFggRE8gTk9UIFVTRS4gVGhpcyBpcyBhIHRlbXBvcmFyeSBzdHViIGZ1bmN0aW9uLlxuXHQqIFhYWCBJdCBXSUxMIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblx0Ki9cblx0ZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0fVxuXG5cdGNyZWF0ZURlYnVnLmVuYWJsZShjcmVhdGVEZWJ1Zy5sb2FkKCkpO1xuXG5cdHJldHVybiBjcmVhdGVEZWJ1Zztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXR1cDtcbiJdfQ==